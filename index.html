<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Restaurant Finder</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="style.css" />
    <script src="restaurants.js" type="module"></script>
    <script src="login.js" type="module"></script>
    <script src="register.js" type="module"></script>
    <script src="map.js" type="module"></script>
    <script src="profile.js" type="module"></script>
  </head>

  <body>
    <header class="site-header">
      <h1>Restaurant Finder</h1>
      <div class="auth-buttons">
        <button id="profileBtn" style="display: none" class="profile-button">
          <img
            id="profileImage"
            src="/images/default.png"
            alt="Profile"
            class="profile-pic"
            id="profilePic"
          />
          <span class="profile-username" id="profileUsername">Username</span>
        </button>
        <button id="loginBtn" class="auth-button login">Login</button>
        <button id="reginBtn" class="auth-button register">Register</button>
      </div>
    </header>

    <main class="main-content">
      <div class="filter-buttons">
        <button id="Favourite" class="filter-button">
          Open Favourite Restaurant
        </button>
        <button id="sodexoB" class="filter-button">Sodexo Restaurants</button>
        <button id="compassB" class="filter-button">Compass Restaurants</button>
        <button id="weekday" class="filter-button">Weekly/Daily Menu</button>
        <div class="search-container">
          <input
            type="text"
            id="citySearch"
            placeholder="Search by city..."
            class="search-box"
          />
          <span class="search-icon">üîç</span>
        </div>
      </div>

      <div id="content">
        <table id="target" class="restaurant-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Company</th>
              <th>City</th>
            </tr>
          </thead>
          <tbody>
            <!-- Table content will be generated here -->
          </tbody>
        </table>
        <div id="map" class="restaurant-map"></div>
      </div>
    </main>

    <dialog id="modal" class="custom-modal"></dialog>

    <dialog id="loginModal" class="auth-modal">
      <form id="loginForm" class="auth-form">
        <h2>Login</h2>
        <div class="form-group">
          <label for="username">Username:</label>
          <input type="text" id="username" required />
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" id="password" required />
        </div>
        <div class="form-actions">
          <button type="submit" class="submit-button">Log In</button>
          <button type="button" id="closeLoginModal" class="cancel-button">
            Cancel
          </button>
        </div>
      </form>
    </dialog>

    <dialog id="registerModal" class="auth-modal">
      <form id="registerForm" class="auth-form">
        <h2>Register</h2>
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" id="email" required />
        </div>
        <div class="form-group">
          <label for="username">Username:</label>
          <input type="text" id="registerusername" required />
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" id="registerpassword" required />
        </div>
        <div class="form-actions">
          <button type="submit" class="submit-button">Register</button>
          <button type="button" id="closeRegisterModal" class="cancel-button">
            Cancel
          </button>
        </div>
      </form>
    </dialog>

    <dialog id="profileModal" class="modal-container">
      <form id="profileForm" class="form-section">
        <h2 class="form-title">Update Profile</h2>
        <div class="form-group">
          <label for="updateUsername">Username:</label>
          <input
            type="text"
            id="updateUsername"
            name="updateUsername"
            class="form-input"
            required
          />
        </div>
        <div class="form-group">
          <label for="updateEmail">Email:</label>
          <input
            type="email"
            id="updateEmail"
            name="updateEmail"
            class="form-input"
            required
          />
        </div>
        <div class="form-group">
          <label for="updatePassword">Password:</label>
          <input
            type="password"
            id="updatePassword"
            name="updatePassword"
            class="form-input"
            required
          />
        </div>
        <div class="button-group">
          <button type="submit" class="primary-btn">Update</button>
          <button type="button" id="closeProfileModal" class="secondary-btn">
            Cancel
          </button>
        </div>
      </form>

      <div class="form-divider">
        <span>or</span>
      </div>

      <form id="avatar-form" enctype="multipart/form-data" class="form-section">
        <h2 class="form-title">Change Profile Picture</h2>
        <div class="form-group">
          <label for="avatar" class="file-label">Choose an image</label>
          <input
            type="file"
            id="avatar"
            name="avatar"
            accept="image/*"
            required
            class="file-input"
          />
        </div>
        <button type="submit" class="primary-btn submit-pic-btn">
          Upload Image
        </button>
      </form>
    </dialog>

    <footer class="site-footer">
      <p>&copy; 2023 Restaurant Finder. All rights reserved.</p>
    </footer>
  </body>
</html>
